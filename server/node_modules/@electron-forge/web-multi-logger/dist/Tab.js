"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Log_1 = __importDefault(require("./Log"));
let idCounter = 1;
class Tab {
    constructor(name, ws) {
        this.name = name;
        this.ws = ws;
        this.logs = [];
        this.id = idCounter;
        idCounter += 1;
    }
    /**
     * Log a line to the web UI, a new line is automatically appended to the line
     */
    log(line) {
        const log = new Log_1.default(line, new Date());
        this.logs.push(log);
        for (const client of this.ws.getWss().clients) {
            client.send(JSON.stringify({
                tab: this.id,
                payload: log,
            }));
        }
    }
    toJSON() {
        return {
            id: this.id,
            name: this.name,
            logs: this.logs,
        };
    }
}
exports.default = Tab;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFiLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1RhYi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLGdEQUF3QjtBQUV4QixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7QUFFbEIsTUFBcUIsR0FBRztJQUt0QixZQUFtQixJQUFZLEVBQVUsRUFBZ0I7UUFBdEMsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUFVLE9BQUUsR0FBRixFQUFFLENBQWM7UUFKakQsU0FBSSxHQUFVLEVBQUUsQ0FBQztRQUt2QixJQUFJLENBQUMsRUFBRSxHQUFHLFNBQVMsQ0FBQztRQUNwQixTQUFTLElBQUksQ0FBQyxDQUFDO0lBQ2pCLENBQUM7SUFFRDs7T0FFRztJQUNILEdBQUcsQ0FBQyxJQUFZO1FBQ2QsTUFBTSxHQUFHLEdBQUcsSUFBSSxhQUFHLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVwQixLQUFLLE1BQU0sTUFBTSxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDOUMsTUFBTSxDQUFDLElBQUksQ0FDVCxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUNiLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDWixPQUFPLEVBQUUsR0FBRzthQUNiLENBQUMsQ0FDSCxDQUFDO1FBQ0osQ0FBQztJQUNILENBQUM7SUFFTyxNQUFNO1FBQ1osT0FBTztZQUNMLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRTtZQUNYLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNmLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNoQixDQUFDO0lBQ0osQ0FBQztDQUNGO0FBbENELHNCQWtDQyJ9